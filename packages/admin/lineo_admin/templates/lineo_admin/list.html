{% extends 'lineo_admin/base.html' %}
{% load i18n %}
{% load get urlaccess %}

{% block main %}

<div class="d-flex justify-content-end mb-1">
  {% if view.create_viewname %}
    {% url view.create_viewname as href %}
    {% include "lineo_admin/includes/drawer-button.html" with href=href icon="plus" label="Add" %}
  {% endif %}
</div>

<table class="table">
  <thead>
    <tr>
      {% for column in view.get_columns %}
      <th scope="col">{{ column.verbose_name|capfirst }}</th>
      {% endfor %}
      <th scope="col"></th>
    </tr>
  </thead>
  <tbody>
    {% for obj in object_list %}
      <tr>
        {% for column in view.columns %}
        <td>{% get obj column %}</td>
        {% endfor %}
        <td>
          {% for action in view.actions %}
            {% urlaccess action.viewname obj as href %}
            {% if href %}
              {% if action.drawer %}
                {% with href=href icon=action.icon title=action.title %}
                {% include "lineo_admin/includes/drawer-button.html" %}
                {% endwith %}
              {% else %}
              <a href="{{ href }}" class="btn">
                <i class="fa-solid fa-{{ action.icon }}"></i>
              </a>
              {% endif %}
            {% endif %}
          {% endfor %}
        </td>
      </tr>
    {% endfor %}
  </tbody>
</table>

{% endblock %}
